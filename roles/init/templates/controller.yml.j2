---
default_dnet: "{{default_dnet}}"
dnets:
  {{default_dnet}}: "{{default_dnet_domain}}"
{% if dnet_list == " " %}
{% else %}
{% set our_list = dnet_list.split(',') %}
{% for d in our_list %}  {{d}}:
{% endfor %}
{% endif %}
# Use dnets_deploy_bypass as a list of dnets you do not
# want new edges configuration updated.
# dnets_deploy_bypass:
#   - dnet1
#   - dnet2
le_url: "{{le_url}}"
swabber_grace: "{{swabber_grace}}"
challenger_key: "{{rand_result.results[0].stdout}}"
botbanger_key: "{{rand_result.results[1].stdout}}"
timestamp_txt_record_name: "{{rand_result.results[2].stdout}}"

{% if edgemanage_transfer_ip == " " %}
dns_notify_servers:
{% else %}
{% set dns_tranfers = edgemanage_transfer_ip.split(',') %}
dns_notify_servers:
{% for dns_tranfer in dns_tranfers %}
  - {{dns_tranfer}}
{% endfor %}
{% endif %}

# These paths that get autogenerated expect that autodeflect was installed
# by cityhall and exists in the modules directory of deflect.
autobrains_config:
  deflect_dir: "{{'../../'|realpath}}"
  log_dir: "{{'../../logs/sysedits'|realpath}}"
  deploy_key_path: "{{'../../etc/edge_key'|realpath}}"
  loc_bind_confs: "/etc/bind"
  zone_files: "/etc/edgemanage/zones"
  trafficserver_dir: "/usr/local/trafficserver"
  email_notify: "{{email_notify}}"
  email_key_id: "{{email_key_id}}"
